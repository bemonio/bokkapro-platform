{% extends "layout.html" %}

{% block content %}
<div class="flex items-center justify-between mb-6">
  <h1 class="text-2xl font-bold">{{ t(lang, "offices.title") }}</h1>
  <a href="{{ url_with_lang('/offices/new', lang=lang) }}" class="bg-slate-900 text-white text-sm px-4 py-2 rounded-md">{{ t(lang, "offices.new_office") }}</a>
</div>

<form
  method="get"
  action="/offices"
  class="mb-4"
  hx-get="/offices"
  hx-target="#offices-table"
  hx-push-url="true"
>
  <input type="hidden" name="lang" value="{{ lang }}" />
  <div class="flex gap-2">
    <input
      type="text"
      name="search"
      value="{{ search }}"
      placeholder="{{ t(lang, 'offices.search_placeholder') }}"
      class="w-full rounded-md border border-slate-300 px-3 py-2"
      hx-trigger="keyup changed delay:300ms, search"
      hx-get="/offices"
      hx-target="#offices-table"
      hx-include="closest form"
      hx-push-url="true"
    />
    <input type="hidden" name="sort" value="{{ sort }}" />
    <input type="hidden" name="order" value="{{ order }}" />
    <select name="page_size" class="rounded-md border border-slate-300 px-3 py-2" onchange="this.form.requestSubmit()">
      {% for size in [5, 10, 20, 50] %}
      <option value="{{ size }}" {% if pagination.page_size == size %}selected{% endif %}>{{ t(lang, "offices.page_size", size=size) }}</option>
      {% endfor %}
    </select>
  </div>
</form>

<div id="offices-table">
  {% include "offices/_table.html" %}
</div>
{% endblock %}
